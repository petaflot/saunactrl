<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Sauna Control</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="/favicon.png">
  <link rel="stylesheet" href="sauna.css" />
  <script src="sauna.js" defer></script>
</head>

<body>
  <h1 id="title">Sauna Control</h1>

  <table>
    <tr class="odd" id="tr_power">
      <td><h2 class="odd" id="title_power">Power</h2></td>
      <td>
        <label id="powerWrap" class="switch modeUnknown" role="button" aria-label="Power toggle">
          <input type="checkbox" id="powerToggle" />
          <span class="slider">
            <div class="knobPower"></div>
            <!-- rotating CCW reload SVG (hidden until reload-mode triggers) -->
            <svg class="power-reload-svg" id="powerReloadSVG" width="48" height="48" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
		  <g
		     fill="none"
		     stroke="black"
		     stroke-width="2"
		     stroke-linecap="round"
		     stroke-linejoin="round"
		     id="g2">
		    <path
		       d="m 21,12.180525 a 9,9 0 1 0 -2.1,5.6"
		       id="path1" />
		    <path
		       d="m 21,21.180525 v -6 h -6"
		       id="path2" />
		  </g>
            </svg>
          </span>
        </label>
      </td>
      <td>
        <p class="voltage input">N: <span id="voltage-inN">--</span></p>
        <p class="voltage input">R: <span id="voltage-inR">--</span></p>
        <p class="voltage input">S: <span id="voltage-inS">--</span></p>
        <p class="voltage input">T: <span id="voltage-inT">--</span></p>
      </td>
      <td>
	<p>Status: <span id="status" class="status modeUnknown">Unknown</span></p>
      	<p>Door: <span id="door_status">Unknown</span></p>
      </td>
    </tr>

    <tr class="even" id="tr_temp">
      <td><h2 class="even" id="title_temp">Temp.</h2></td>
      <td>
        <p id="currentTemp" class="currentTemp">--°C</p>
      </td>
      <td colspan=2>
        <div style="display:flex;flex-direction:column;align-items:center;">
          <div class="targetContainer" title="Click to set target">
            <p id="targetTempDisplay" class="targetTempDisplay">--°C</p>
          </div>
          <p id="valueOfPID" class="valueOfPID">PID: --</p>
          <p id="ambiantTemp" class="ambiantTemp">Ambiant: --°C</p>
	</div>
      </td>
    </tr>

    <tr class="odd" id="tr_switches">
      <td><h2 class="odd" id="title_switches">Switches</h2></td>
      <td colspan=2>
        <div class="relays-row" role="group" aria-label="Phase switches">

          <div style="text-align:center;">
            <p class="relay-label">Phase 1</p>
            <div id="relay1" class="v-switch modeUnknown" onclick="clickRelay(event,1)">
              <div class="knob"><div class="pill" style="display:none"></div><div class="err-x" style="display:none"></div></div>
            </div>
            <div class="relay-status"><span id="relay1Status">--</span></div>
            <div class="voltage output"><span id="voltage-out1R">--</span></div>
          </div>

          <div style="text-align:center;">
            <p class="relay-label">Phase 2</p>
            <div id="relay2" class="v-switch modeUnknown" onclick="clickRelay(event,2)">
              <div class="knob"><div class="pill" style="display:none"></div><div class="err-x" style="display:none"></div></div>
            </div>
            <div class="relay-status"><span id="relay2Status">--</span></div>
            <div class="voltage output"><span id="voltage-out1S">--</span></div>
          </div>

          <div style="text-align:center;">
            <p class="relay-label">Phase 3</p>
            <div id="relay3" class="v-switch modeUnknown" onclick="clickRelay(event,3)">
              <div class="knob"><div class="pill" style="display:none"></div><div class="err-x" style="display:none"></div></div>
            </div>
            <div class="relay-status"><span id="relay3Status">--</span></div>
            <div class="voltage output"><span id="voltage-out1T">--</span></div>
          </div>
        </div>

      </td>
    </tr>
    <tr class="even clock" id="tr_clock">
      <td><h2 class="even">Clock</h2></td>
      <td>
		<div class="clock-cal"><span id="clock-cal"></span></div>
		<div class="clock-hm"><span id="clock-hm">--:--</span></div>
      </td>
      <td colspan=2>
          <div class="timerContainer" title="Click to reset timer">
		<div class="timer-hm">
			<span id="timer-hm">00:00</span>
		</div>
	  </div>
	  <div>
		<div id="timer-ctrl" onclick="enableTimer(!timerEnable)">⏯</div>
		<div class="timer-s">
			<span id="timer-s">:00</span>
		</div>
	  </div>
      </td>
      </td>
    </tr>
  </table>
</body>
</html>
